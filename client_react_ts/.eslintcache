[{"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\index.tsx":"1","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\reportWebVitals.ts":"2","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\App.tsx":"3","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\stores.ts":"4","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\types.ts":"5","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\actions\\userActions.ts":"6","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\reducers\\userReducers.ts":"7","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\pages\\home.tsx":"8","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\reducers\\uiReducers.ts":"9","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\pages\\Home.tsx":"10","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\pages\\SignIn.tsx":"11"},{"size":500,"mtime":499162500000,"results":"12","hashOfConfig":"13"},{"size":425,"mtime":499162500000,"results":"14","hashOfConfig":"13"},{"size":1287,"mtime":1609652614233,"results":"15","hashOfConfig":"13"},{"size":1023,"mtime":1609647410657,"results":"16","hashOfConfig":"13"},{"size":916,"mtime":1609548168757,"results":"17","hashOfConfig":"13"},{"size":1730,"mtime":1609645530015,"results":"18","hashOfConfig":"13"},{"size":1097,"mtime":1609686790154,"results":"19","hashOfConfig":"13"},{"size":172,"mtime":1609554991152,"results":"20","hashOfConfig":"13"},{"size":734,"mtime":1609686873027,"results":"21","hashOfConfig":"13"},{"size":172,"mtime":1609561935285,"results":"22","hashOfConfig":"13"},{"size":2892,"mtime":1609628254720,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1nf8rzl",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"26"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"26"},"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\index.tsx",[],["50","51"],"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\reportWebVitals.ts",[],"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\App.tsx",["52"],"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\stores.ts",["53"],"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\types.ts",[],"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\actions\\userActions.ts",["54","55","56"],"import {\r\n  SET_USER,\r\n  SET_ERRORS,\r\n  LOADING_UI,\r\n  CLEAR_ERRORS,\r\n  SET_UNAUTHENTICATED,\r\n  LOADING_USER,\r\n} from \"../types\";\r\n\r\nimport axios from \"axios\";\r\ninterface ISignIn {\r\n  nombre: string;\r\n  password: string;\r\n}\r\n\r\ninterface IpostItem {\r\n  [key: string]: string | number;\r\n}\r\n\r\ninterface Iusuario {\r\n  id: number;\r\n  nombre: string;\r\n}\r\n\r\ninterface IResToken {\r\n  usuario: {\r\n    [key: string]: Iusuario;\r\n  };\r\n  token: string;\r\n}\r\nexport const signInUser = (userData: ISignIn, history: any) => (\r\n  dispatch: any\r\n) => {\r\n  dispatch({ type: LOADING_UI });\r\n  axios\r\n    .post(\"auth/signin\", userData)\r\n    .then((res) => {\r\n      setAuthorizationHeader(res.data.token); // TODO: should be res.body, need to test to get the token\r\n      dispatch({ type: SET_USER, payload: res.data });\r\n      dispatch({ type: CLEAR_ERRORS });\r\n      console.log(\"succes\");\r\n      // history maybe is react router rom redirect\r\n      history.push(\"/\"); //redirect to index page after login\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"signIn User error: \", err.response);\r\n      dispatch({ type: SET_ERRORS, payload: err.response.data });\r\n    });\r\n};\r\n\r\nexport const signOutUser = () => (dispatch: any) => {\r\n  localStorage.removeItem(\"token\");\r\n  delete axios.defaults.headers.common[\"Authorization\"];\r\n  dispatch({\r\n    type: SET_UNAUTHENTICATED,\r\n  });\r\n  window.location.href = \"/login\"; //redirect to index page after login\r\n};\r\n\r\n//helper\r\nconst setAuthorizationHeader = (token: string) => {\r\n  const tokenStr = `Bearer ${token}`;\r\n  localStorage.setItem(\"token\", tokenStr); // setting token to local storage\r\n  axios.defaults.headers.common[\"Authorization\"] = tokenStr; //setting authorize token to header in axios\r\n};\r\n","D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\reducers\\userReducers.ts",[],"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\pages\\home.tsx",[],["57","58"],"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\redux\\reducers\\uiReducers.ts",["59"],"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\pages\\Home.tsx",[],"D:\\Users\\iory_\\Documents\\Project\\inventory_app\\client_react_ts\\src\\pages\\SignIn.tsx",["60","61"],"import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//MUI\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\n//Redux\r\nimport { connect } from \"react-redux\";\r\nimport { signInUser } from \"../redux/actions/userActions\";\r\n\r\ninterface IUserInput {\r\n  nombre: string;\r\n  password: string;\r\n}\r\n\r\nfunction SignIn(props: any) {\r\n  const initialValue: IUserInput = { nombre: \"\", password: \"\" };\r\n  const [userData, setUserData] = useState(initialValue);\r\n  const [errors, setErrors] = useState({\r\n    nombre: \"\",\r\n    password: \"\",\r\n    general: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (props.UI.errors) {\r\n      setErrors(props.UI.errors);\r\n    }\r\n    setLoading(props.UI.loading);\r\n  }, [props.UI]);\r\n\r\n  const handleSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    console.log(\"submit: \", e);\r\n    props.signInUser(userData, props.history);\r\n  };\r\n\r\n  const handleChange = (e: any) => {\r\n    setUserData((value) => ({\r\n      ...value,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\" fixed>\r\n      <Typography variant=\"h2\">SignIn</Typography>\r\n      <form noValidate onSubmit={handleSubmit}>\r\n        <TextField\r\n          id=\"nombre\"\r\n          name=\"nombre\"\r\n          type=\"nombre\"\r\n          label=\"Nombre\"\r\n          value={userData.nombre}\r\n          onChange={handleChange}\r\n          fullWidth\r\n          helperText={errors.nombre}\r\n          error={errors.nombre ? true : false}\r\n        />\r\n        <TextField\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          label=\"Password\"\r\n          value={userData.password}\r\n          onChange={handleChange}\r\n          fullWidth\r\n          helperText={errors.password}\r\n          error={errors.password ? true : false}\r\n        />\r\n        {errors.general && (\r\n          <Typography variant=\"body2\">{errors.general}</Typography>\r\n        )}\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          disabled={loading}\r\n        >\r\n          SignIn\r\n          {loading && <CircularProgress size={30} />}\r\n        </Button>\r\n        <br></br>\r\n        {/* <span>\r\n            no tienes cuenta? registrate <Link to=\"/signup\">aqui</Link>\r\n          </span> */}\r\n      </form>\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  user: state.user,\r\n  UI: state.UI,\r\n});\r\nconst mapActionsToProps = {\r\n  signInUser,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionsToProps)(SignIn);\r\n",{"ruleId":"62","replacedBy":"63"},{"ruleId":"64","replacedBy":"65"},{"ruleId":"66","severity":1,"message":"67","line":14,"column":16,"nodeType":"68","messageId":"69","endLine":14,"endColumn":21},{"ruleId":"66","severity":1,"message":"70","line":1,"column":57,"nodeType":"68","messageId":"69","endLine":1,"endColumn":64},{"ruleId":"66","severity":1,"message":"71","line":7,"column":3,"nodeType":"68","messageId":"69","endLine":7,"endColumn":15},{"ruleId":"66","severity":1,"message":"72","line":16,"column":11,"nodeType":"68","messageId":"69","endLine":16,"endColumn":20},{"ruleId":"66","severity":1,"message":"73","line":25,"column":11,"nodeType":"68","messageId":"69","endLine":25,"endColumn":20},{"ruleId":"62","replacedBy":"74"},{"ruleId":"64","replacedBy":"75"},{"ruleId":"76","severity":1,"message":"77","line":19,"column":1,"nodeType":"78","endLine":30,"endColumn":2},{"ruleId":"66","severity":1,"message":"79","line":2,"column":10,"nodeType":"68","messageId":"69","endLine":2,"endColumn":14},{"ruleId":"66","severity":1,"message":"80","line":5,"column":8,"nodeType":"68","messageId":"69","endLine":5,"endColumn":18},"no-native-reassign",["81"],"no-negated-in-lhs",["82"],"@typescript-eslint/no-unused-vars","'Home2' is defined but never used.","Identifier","unusedVar","'compose' is defined but never used.","'LOADING_USER' is defined but never used.","'IpostItem' is defined but never used.","'IResToken' is defined but never used.",["81"],["82"],"import/no-anonymous-default-export","Unexpected default export of anonymous function","ExportDefaultDeclaration","'Link' is defined but never used.","'withStyles' is defined but never used.","no-global-assign","no-unsafe-negation"]